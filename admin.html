<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>شاشة المدير</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="admin-theme">
  <div class="top">
    <div class="row topRow">
      <div class="nav rightNav" id="navRight">
        <a href="index.html" id="navHome">الرئيسية</a>
        <a href="admin.html" id="navRole" style="display:none">شاشة المدير</a>
      </div>

      <div class="brand" id="brandName">جمعية عائلية</div>

      <div class="nav leftNav" id="navLeft">
        <a href="register.html" id="navLogin">تسجيل الدخول</a>
        <a href="#" id="navLogout" style="display:none">خروج</a>
        <a href="contact.html" id="navContact">التواصل</a>
      </div>

      <button class="menuBtn" id="menuBtn" aria-label="menu" type="button">≡</button>
    </div>

    <div class="mobileMenu" id="mobileMenu" style="display:none"></div>
  </div>

  <div class="container">
    <div id="msg"></div>

    <!-- دخول المدير -->
    <div class="card" id="loginBox">
      <h3>دخول المدير</h3>
      <div class="grid">
        <div class="col-8">
          <div class="field">
            <div class="labelPill">رمز PIN للمدير</div>
            <input class="input" id="adminPin" placeholder="ادخل رمز PIN">
          </div>
        </div>
        <div class="col-4">
          <button class="btn w100" id="btnAdminLogin" onclick="adminLogin()">دخول</button>
        </div>
      </div>
      <div class="note">ملاحظة, دخول المدير يكون برمز PIN فقط</div>
    </div>

    <!-- لوحة المدير -->
    <div id="adminPanel" style="display:none">

      <!-- لوحة رئيسية -->
      <div id="dashboard">

        <div class="card">
          <div class="cardHead">
            <h3>انشاء جمعية جديدة</h3>
            <div class="muted">صيغة التاريخ ثابتة عبر اختيار التقويم</div>
          </div>

          <div class="grid">
            <div class="col-6">
              <div class="field">
                <div class="labelPill">اسم الجمعية</div>
                <input class="input" id="socName" placeholder="مثال , جمعية 1">
              </div>
            </div>
            <div class="col-6">
              <div class="field">
                <div class="labelPill">تاريخ البداية</div>
                <input class="input" id="socStart" type="date">
              </div>
            </div>
            <div class="col-12 align-end">
              <button class="btn" id="btnCreate" onclick="createSoc()">انشاء</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="cardHead">
            <h3>الجمعيات</h3>
            <div class="muted">اضغط فتح لعرض تفاصيل الجمعية داخل لوحة المدير</div>
          </div>
          <div class="grid" id="societiesAdmin"></div>
        </div>

        <!-- المشتركين لا يظهرون هنا, يظهرون فقط عند الضغط على تبويب المشتركين داخل لوحة الجمعية -->
        <div class="card" style="display:none">
          <h3>المشتركين</h3>
          <div id="members"></div>
        </div>

      </div>

      <!-- عرض جمعية محددة داخل نفس الصفحة -->
      <div id="societyView" style="display:none">

        <div class="card">
          <div class="cardHead">
            <h3 id="societyTitle">تفاصيل الجمعية</h3>
            <div class="align-end">
              <button class="btn btn2" onclick="backToDashboard()">رجوع</button>
            </div>
          </div>

          <div id="societyMeta" class="small"></div>

          <div class="tabs mt12">
            <button class="tab active" onclick="switchTab('months', event)">بطاقات الأشهر</button>
            <button class="tab" onclick="switchTab('collection', event)">التحصيل</button>
            <button class="tab" onclick="switchTab('delivery', event)">التسليم</button>
            <button class="tab" onclick="switchTab('members', event)">المشتركين</button>
            <button class="tab" onclick="switchTab('changes', event)">التغييرات</button>
          </div>
        </div>

        <!-- تبويب بطاقات الأشهر -->
        <div class="card" id="tab-months">
          <div class="cardHead">
            <h3>بطاقات الأشهر</h3>
            <div class="muted">الألوان تعكس حالة الشهر حسب القدرة المتاحة للتسليم</div>
          </div>
          <div id="monthsGrid" class="monthsGrid"></div>
        </div>

        <!-- تبويب التحصيل -->
        <div class="card" id="tab-collection" style="display:none">
          <div class="cardHead">
            <h3>التحصيل</h3>
            <div class="muted">سيتم بناء بطاقات التحصيل لكل شهر هنا</div>
          </div>
          <div id="collectionBox"></div>
        </div>

        <!-- تبويب التسليم -->
        <div class="card" id="tab-delivery" style="display:none">
          <div class="cardHead">
            <h3>التسليم</h3>
            <div class="muted">سيتم بناء بطاقات التسليم لكل شهر هنا</div>
          </div>
          <div id="deliveryBox"></div>
        </div>

        <!-- تبويب المشتركين -->
        <div class="card" id="tab-members" style="display:none">
          <div class="cardHead">
            <h3>المشتركين</h3>
            <div class="muted">عرض كبطاقات</div>
          </div>
          <div id="societyMembersCards"></div>
        </div>

        <!-- تبويب التغييرات -->
        <div class="card" id="tab-changes" style="display:none">
          <div class="cardHead">
            <h3>التغييرات</h3>
            <div class="muted">انسحاب أو تعديل أسهم أثناء الجمعية الجديدة</div>
          </div>
          <div id="societyChangesTable"></div>
        </div>

      </div>

    </div>
  </div>

  <script src="assets/js/config.js"></script>
  <script src="assets/js/api.js"></script>
  <script src="assets/js/ui.js"></script>
  <script src="assets/js/auth_ui.js"></script>
  <script src="assets/js/pages/admin.js"></script>
</body>
</html>
